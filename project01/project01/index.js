// MENU DATA
const MENU = [{
        order: 1,
        title: "VOIP ОБОРУДОВАНИЕ",
        url: "voip_equipment.html",
    },
    {
        order: 2,
        title: "SKYPE оборудование",
        url: "skype_equipment.html",
    },
    {
        order: 3,
        title: "GSM оборудование",
        url: "gsm_equipment.html",
    },
    {
        order: 4,
        title: "Гарнитуры",
        url: "video_equipment.html",
    },
    {
        order: 5,
        title: "Сетевое оборудование",
        url: "video_equipment.html",
    },
    {
        order: 6,
        title: "VIDEO оборудование",
        url: "video_equipment.html",
    },
    {
        order: 7,
        title: "Електронные замки",
        url: "video_equipment.html",
    },
    {
        order: 8,
        title: "Домофон",
        url: "video_equipment.html",
    },
    {
        order: 9,
        title: "Распродажа",
        url: "video_equipment.html",
    },
    {
        order: 10,
        title: "Распродажа 2",
        url: "video_equipment.html",
    },
    {
        order: 11,
        title: "Распродажа 3",
        url: "video_equipment.html",
    },
    {
        order: 12,
        title: "Распродажа 4",
        url: "video_equipment.html",
    },
];

// NEWS DATA
const NEWS = [{
        date: "2021/01/01",
        title: "Новые телефоны Grandstream серии GRP2600",
        description: "Grandstream серии GRP2600 - это современные IP-телефоны операторского класса, которые были созданы для быстрого массового развёртывания.",
        img: "https://homy.ru/upload/products/GRP_b2b_large.jpg",
        url: "voip_equipment.html",
    },
    {
        date: "2020/12/25",
        title: "Новая прошивка для IP-телефонов Fanvil X5S/X6",
        description: "Новая прошивка для IP-телефонов Fanvil X5S/X6",
        img: "https://homy.ru/upload/articles/untitled.png",
        url: "voip_equipment.html",
    },
    {
        date: "2021/01/14",
        title: "У нас открыт склад и пункт выдачи в Санкт Петербурге",
        description: "Открытие точки выдачи товаров в северной столице",
        img: "https://homy.ru/upload/articles/sankt-petersburg-3012671_960_720.jpg",
        url: "voip_equipment.html",
    },
    {
        date: "2021/01/01",
        title: "Новость для теста 1",
        description: "Тут не много описания",
        img: "https://homy.ru/upload/articles/sankt-petersburg-3012671_960_720.jpg",
        url: "voip_equipment.html",
    },
    {
        date: "2020/11/12",
        title: "Новость для теста 2",
        description: "Тут не много описания но текста чучуть по больше, что бы посмотреть как выводится",
        img: "https://homy.ru/upload/articles/sankt-petersburg-3012671_960_720.jpg",
        url: "voip_equipment.html",
    }
];

// BANER NEWS DATA
const slides = [{
        img: 'https://homy.ru/upload/images/carousel_02.jpg',
        url: 'voip_equipment.html'
    },
    {
        img: 'https://homy.ru/upload/images/carousel_slide1.jpg',
        url: 'voip_equipment.html'
    },
    {
        img: 'https://homy.ru/upload/images/carousel_slaĭdy2.jpg',
        url: 'voip_equipment.html'
    }
];

// ITEMS DATA
const ITEMS = [{
        id: 1,
        type: "new",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "",
        price: 1000,
        oldPrice: 1100,
        currency: "UAH",
        date: "2021/01/01",
        url: "new_items/item1.html",
    },
    {
        id: 2,
        type: "new",
        description: "WiFi SIP телефон Grandstream WP820",
        img: "https://homy.ru/upload/products/grandstream_wp820.jpg",
        price: 9678.75,
        currency: "UAH",
        date: "2021/01/02",
        url: "new_items/item1.html",
    },
    {
        id: 3,
        type: "new",
        description: "Готовый комплект VEGATEL VT-900E/1800-kit",
        img: "https://homy.ru/upload/catalog/vt900e1800kit_medium.jpg",
        price: 14980,
        currency: "RUB",
        date: "2021/02/01",
        url: "new_items/item1.html",
    },
    {
        id: 4,
        type: "new",
        description: "1.3 Мп цилиндрическая IP-камера Milesight MS-C2163-FPN",
        img: "https://homy.ru/upload/products/MS-C2163-FPN.jpg",
        price: 4832.34,
        currency: "RUB",
        date: "2020/12/25",
        url: "new_items/item1.html",
    },
    {
        id: 5,
        type: "new",
        description: "2 Мп цилиндрическая IP-камера Milesight MS-C3363-FPN",
        img: "https://homy.ru/upload/products/Milesight_MS-C3363-FPN.jpg",
        price: 150,
        currency: "USD",
        date: "2020/12/31",
        url: "new_items/item1.html",
    },
    {
        id: 6,
        type: "new",
        description: "Camera SIP Grandstream WP820",
        img: "https://homy.ru/upload/products/MS-C2663-P.jpg",
        price: 4620.45,
        currency: "UAH",
        date: "2021/01/10",
        url: "new_items/item1.html",
    },
    {
        id: 7,
        type: "new",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "",
        price: 1000,
        oldPrice: 1100,
        currency: "UAH",
        date: "2021/01/10",
        url: "new_items/item1.html",
    },
    {
        id: 8,
        type: "new",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "",
        price: 1000,
        oldPrice: 1100,
        currency: "UAH",
        date: "2021/01/01",
        url: "new_items/item1.html",
    },
    {
        id: 9,
        type: "recommended",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/VS_GW1200_8S_medium.jpg",
        date: "2020/12/25",
        url: "new_items/item.html",
    },
    {
        id: 10,
        type: "recommended",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/products/1528114032.800x600.png",
        price: 300,
        oldPrice: 1100,
        currency: "RUB",
        date: "2020/12/25",
        url: "new_items/item.html",
    },
    {
        id: 11,
        type: "recommended",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/products/komplekt_vegatel_vt900ekit_new_large.jpg",
        price: 850.45,
        currency: "UAH",
        date: "2020/12/25",
        url: "new_items/item.html",
    },
    {
        id: 12,
        type: "recommended",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/gxp2160front_medium.jpg",
        price: 150,
        currency: "USD",
        date: "2020/12/25",
        url: "new_items/item.html",
    },
    {
        id: 13,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/43_medium.jpg",
        price: 170,
        oldPrice: 210,
        currency: "EUR",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
    {
        id: 14,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/dualphone3088_medium.jpg",
        price: 170,
        oldPrice: 200,
        currency: "EUR",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
    {
        id: 15,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/SkypeMateUSBM3K_medium.jpg",
        price: 5300,
        oldPrice: 6000,
        currency: "UAH",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
    {
        id: 16,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/dualphone3088_medium.jpg",
        price: 5300,
        oldPrice: 6200,
        currency: "UAH",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
    {
        id: 17,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/mobigater_pro_medium2.jpg",
        price: 100,
        oldPrice: 200,
        currency: "USD",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
    {
        id: 18,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/welltechwp5895_medium.jpg",
        price: 180,
        oldPrice: 200,
        currency: "USD",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
    {
        id: 19,
        type: "sale",
        description: "IP телефон Siemens Gigaset C530A IP",
        price: 3700,
        oldPrice: 5000,
        currency: "RUB",
        date: "2021/01/13",
        url: "https://same_url/item.html",
    },
];
// CATALOG_MENU DATA
const TOP_MENU = {
    catalog: {
        order: 1,
        title: "Каталог",
        submenu: [{
                order: 1,
                title: "VOIP оборудование",
                url: "voip_equipment.html",
            },
            {
                order: 2,
                title: "GSM оборудование",
                url: "gsm_equipment.html",
            },
            {
                order: 3,
                title: "Телефония",
                url: "gsm_equipment.html",
            },
            {
                order: 4,
                title: "Гарнитуры",
                url: "gsm_equipment.html",
            },
        ],
    },
    about: {
        order: 3,
        title: "О компании",
        submenu: [{
                order: 1,
                title: "VOIP оборудование",
                url: "voip_equipment.html",
            },
            {
                order: 3,
                title: "GSM оборудование",
                url: "gsm_equipment.html",
            },
            {
                order: 2,
                title: "Routers",
                url: "routers.html",
            },
        ],
    },
    payment_delivery: {
        order: 2,
        title: "Оплата и доставка",
        url: "payment_delivery.html",
    },
    garantiya_i_vozvrat_tovara: {
        order: 4,
        title: "Гарантия и возврат",
        url: "payment_delivery.html",
    },
    sotrudnichestvo: {
        order: 5,
        title: "Сотрудничество",
        url: "payment_delivery.html",
    },
    services: {
        order: 6,
        title: "Услуги",
        submenu: [{
                order: 1,
                title: "Настройка VoIP оборудования",
                url: "voip_equipment.html",
            },
            {
                order: 2,
                title: "Настройка IP АТС",
                url: "gsm_equipment.html",
            },
            {
                order: 3,
                title: "Аутсорсинг в области IP телефонии",
                url: "routers.html",
            },
        ],
    },
    support: {
        order: 7,
        title: "Техподдержка",
        url: "payment_delivery.html",
    },
    contacts: {
        order: 8,
        title: "Контакты",
        url: "payment_delivery.html",
    },
};
//BUYING NOW DATA
const BUYING_RIGHT_NOW = [{
        title: "Название товара 1",
        img: "https://homy.ru/upload/products/WS282-P-1.jpg",
        url: "https://same_url/item.html",
    },
    {
        title: "Название товара 2",
        img: "https://homy.ru/upload/products/GRP2615_front_large.jpg",
        url: "https://same_url/item.html",
    },
    {
        title: "Название товара 3",
        img: "https://homy.ru/upload/products/GBX20_front_large.jpg",
        url: "https://same_url/item.html",
    },
    {
        title: "Название товара 4",
        img: "https://homy.ru/upload/catalog/44_medium.png",
        url: "https://same_url/item.html",
    },
    {
        title: "Товар без картинки",
        url: "https://same_url/item.html",
    },
    {
        title: "Название товара 5",
        img: "https://homy.ru/upload/catalog/dualphone3088_medium.jpg",
        url: "https://same_url/item.html",
    },
    {
        title: "Название товара 6",
        img: "https://homy.ru/upload/products/komplekt_vegatel_vt900ekit_new_large.jpg",
        url: "https://same_url/item.html",
    },
    {
        title: "Название товара 7",
        img: "https://homy.ru/upload/catalog/VS_GW1200_8S_medium.jpg",
        url: "https://same_url/item.html",
    },
];

// STOCK DATA
const PROMOTIONS = [{
        title: "Название акции",
        description: "IP телефон Siemens Gigaset C530A IP",
        url: "https://same_url/item.html",
        time_action: "1d 2h 20m",
    },
    {
        title: "Название акции 2",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: 'https://homy.ru/upload/catalog/ip2061_medium.jpg',
        url: "https://same_url/item.html",
    },
    {
        title: "Название акции",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/EDCONF01_large_medium.jpg",
        url: "https://same_url/item.html",
        time_action: "5d 2h 20m",
    },
    {
        title: "Название акции 2",
        description: "IP телефон Siemens Gigaset C530A IP",
        img: "https://homy.ru/upload/catalog/yealink_yhs328_medium.jpg",
        url: "https://same_url/item.html",
    },
];

// CURRENCY DATA
const CURRENCY = "UAH";
const CURRENCY_EXCHANGE = {
    UAH: 1,
    USD: 27.85,
    RUB: 0.37,
    EUR: 33.38,
};

const BASKET = {
    elements: 3,
    price: 2500,
};

// NAV
const catalogWrapper = document.querySelector('.nav__container');
const catalogBtn = document.querySelector('.catalog');

for (let key in TOP_MENU) {
    const item = TOP_MENU[key];
    let isVisible = false;

    const catalogItem = document.createElement('li');
    catalogItem.classList.add('catalog');

    catalogItem.innerHTML = `
        <a class="nav__container_main">${item.title}</a>
    `;

    if (item.submenu) {
        const menu = document.createElement('div');
        menu.classList.add('nav__container_catalog');

        catalogItem.setAttribute('id', key + 'trigger');
        menu.setAttribute('id', key + 'contextmenu');

        item.submenu.forEach(elem => {
            const menuItem = document.createElement('a');
            menuItem.classList.add('catalog__menu-item');
            menuItem.href = `./pages/${elem.url}`;
            menuItem.textContent = elem.title;
            menu.append(menuItem);
        });

        catalogItem.append(menu);

        catalogItem.addEventListener('click', () => {
            if (isVisible) {
                menu.style.display = 'none';
                isVisible = !isVisible;
            } else {
                menu.style.display = 'block';
                isVisible = !isVisible;
            }
        });
    }

    catalogWrapper.append(catalogItem);
}

// ORANGE MENU
const menuWrapper = document.querySelector('.products__wrapper');
const menu = document.querySelector('.products__list');
const menuArrow = document.querySelector('.products__arrow');

let menuOffset = 0;

MENU.forEach((item) => {
    const menuCategory = document.createElement('div');
    menuCategory.classList.add('products__list_item');

    menuCategory.innerHTML = `
        <a class="products__list_link" href="./pages/${item.url}">${item.title}</a>
    `;
    menu.append(menuCategory);
});

const menuItem = document.querySelector('.products__list_item');
const widthMenu = window.getComputedStyle(menuItem).width;

menu.style.width = +widthMenu.slice(0, widthMenu.length - 2) * MENU.length + 'px';
menuWrapper.style.width = (+widthMenu.slice(0, widthMenu.length - 2) * 10.2 - 21) + 'px';

let switched = false;

menuArrow.addEventListener('click', () => {
    if (!switched) {
        menuOffset = (+widthMenu.slice(0, widthMenu.length - 2) * 2.2 - 21) + 'px';
        menu.style.transform = `translateX(-${menuOffset}`;
        menu.style.transition = '1s all';
        menuArrow.style.transform = 'rotateZ(180deg)';
        switched = !switched;
    } else {
        menu.style.transform = 'translateX(0)';
        menuArrow.style.transform = 'rotateZ(0deg)';
        switched = !switched;
    }
});

// NEWS
const newsWrapper = document.querySelector('.news__list-wrapper');
const randomNewsIndex = [];

for (let i = 1; i <= 3; i++) {
    randomNewsIndex.push(Math.ceil(Math.random() * NEWS.length));
}

NEWS.forEach((item, index) => {
    if (randomNewsIndex.includes(index + 1)) {
        const newCompany = document.createElement('li');
        newCompany.classList.add('news__list_item');

        const month = new Date(Date.parse(item.date)).toLocaleString('ru', {month: 'long'});
        const date = item.date.slice(item.date.length - 2, item.date.length);

        newCompany.innerHTML = ` 
            <div class="news__img">
                <div class="news__img-body">
                    <img src="${item.img}" alt="New">
                    <p class="news__date">${date}</p>
                </div>
                <p class="news__month">${month}</p>
            </div>
            <div class="news__descript">
                <a href="./pages/${item.url}">${item.title}</a>
                <p>${item.description}</p>    
            </div>
        `;

        newsWrapper.append(newCompany);
    }
});

// NEWS BANNER
const slider = document.querySelector('.news__product_slider');
const prev = document.querySelector('.news__product-slider_prew');
const next = document.querySelector('.news__product-slider_next');
const slidesWrapper = document.querySelector('.news__product_slider-wrapper');
const slidesField = document.querySelector('.news__product_slider-inner');
const width = window.getComputedStyle(slidesWrapper).width;

const indicators = document.querySelector('.news__product-dots');
const dots = [];

let slideIndex = 0;
let offset = 0;

slidesField.style.width = 100 * slides.length + '%';
slidesField.style.display = 'flex';
slidesField.style.transition = '1s all';

slidesWrapper.style.overflow = 'hidden';
slidesWrapper.style.maxWidth = width;
slidesWrapper.style.width = '100%';

slides.forEach(item => {
    const slide = document.createElement('div');
    slide.classList.add('news__product_slide');
    slide.style.maxWidth = width;
    slidesWrapper.style.width = '100%';
    slide.innerHTML = ` 
        <a href="./pages/${item.url}">
            <img src="${item.img}" alt="Bg_img">
        </a>
    `;
    slidesField.append(slide);
});

const indicatorsWpapper = document.createElement('ul');
indicatorsWpapper.classList.add('news__product-dots_wrapper');

for (let i = 0; i < slides.length; i++) {
    const dot = document.createElement('li');
    dot.classList.add('news__product-dots_item');
    dot.setAttribute('data-slide-to', i + 1);

    if (i == 0) {
        dot.style.backgroundColor = 'darkorange';
    }

    indicatorsWpapper.append(dot);
    dots.push(dot);
}

indicators.append(indicatorsWpapper);

const autoSwitchSlide = setInterval(nextSlide, 4000);

next.addEventListener('click', () => {
    nextSlide();
    clearInterval(autoSwitchSlide);
});

prev.addEventListener('click', () => {
    prevSlide();
    clearInterval(autoSwitchSlide);
});

function nextSlide() {
    if (offset >= +width.slice(0, width.length - 2) * (slides.length - 1)) {
        offset = 0;
        slideIndex = 0;
    } else {
        offset += +width.slice(0, width.length - 2);
        slideIndex++;
    }

    slidesField.style.transform = `translateX(-${offset}px)`;

    dots.forEach(dot => dot.style.backgroundColor = 'white');
    dots[slideIndex].style.backgroundColor = 'darkorange';
}

function prevSlide() {
    if (offset <= 0) {
        offset = +width.slice(0, width.length - 2) * (slides.length - 1);
        slideIndex = slides.length - 1;
    } else {
        offset -= +width.slice(0, width.length - 2);
        slideIndex--;
    }

    slidesField.style.transform = `translateX(-${offset}px)`;

    dots.forEach(dot => dot.style.backgroundColor = 'white');
    dots[slideIndex].style.backgroundColor = 'darkorange';
}

dots.forEach(dot => {
    dot.addEventListener('click', (e) => {
        const slideTo = e.target.getAttribute('data-slide-to');
        slideIndex = slideTo - 1;
        offset = deleteNotDigits(width) * slideIndex;

        slidesField.style.transform = `translateX(-${offset}px)`;

        dots.forEach(dot => dot.style.backgroundColor = 'white');
        dots[slideIndex].style.backgroundColor = 'darkorange';
    });
});

function deleteNotDigits(str) {
    return +str.slice(0, width.length - 2);
}

const displayNextSlideBtn = document.querySelector('.arrow_left');
const displayPrevSlideBtn = document.querySelector('.arrow_right');

// news
const noveltySliderContent = document.querySelector('.novelty__slider');
const noveltyNextSlideBtn = document.querySelector('.novelty__slider-arrow-right', '.arrow_right');
const noveltyPrevSlideBtn = document.querySelector('.novelty__slider-arrow-left', '.arrow_left');

// recommends
const recomSliderContent = document.querySelector('.recommendations__slider');
const recomNextSlideBtn = document.querySelector('.recommendations__slider-arrow-right', '.arrow_right');
const recomPrevSlideBtn = document.querySelector('.recommendations__slider-arrow-left', '.arrow_left');

// sale
const saleSliderContent = document.querySelector('.sale__slider');
const saleNextSlideBtn = document.querySelector('.sale__slider-arrow-right', '.arrow_right');
const salePrevSlideBtn = document.querySelector('.sale__slider-arrow-left', '.arrow_left');

// buying now
const nowSliderContent = document.querySelector('.goods__list');
const nowNextSlideBtn = document.querySelector('.goods__slider-arrow-right', '.arrow_right');
const nowPrevSlideBtn = document.querySelector('.goods__slider-arrow-left', '.arrow_left');

// stock
const stockSliderContent = document.querySelector('.stock__slider');
const stockNextSlideBtn = document.querySelector('.stock__slider-arrow-right', '.arrow_right');
const stockPrevSlideBtn = document.querySelector('.stock__slider-arrow-left', '.arrow_left');

sliders(noveltySliderContent, noveltyNextSlideBtn, noveltyPrevSlideBtn, filterData('new', 'date'), 'main-sliders');
sliders(recomSliderContent, recomNextSlideBtn, recomPrevSlideBtn, filterData('recommended', 'price'), 'main-sliders');
sliders(saleSliderContent, saleNextSlideBtn, salePrevSlideBtn, filterData('sale', 'price-difference'), 'main-sliders');
sliders(nowSliderContent, nowNextSlideBtn, nowPrevSlideBtn, BUYING_RIGHT_NOW, 'buying-now');
sliders(stockSliderContent, stockNextSlideBtn, stockPrevSlideBtn, PROMOTIONS, 'stock');

function filterData(filterType, sortType) {
    const goodsData = ITEMS.filter(item => item.type === filterType);

    if (sortType === 'date') {
        goodsData.sort((a, b) => {
            return new Date(b.date).getTime() - new Date(a.date).getTime();
        });
    }

    if (sortType === 'price') {
        goodsData.sort((a, b) => a - b);
    }

    if (sortType === 'price-difference') {
        goodsData.sort((a, b) => {
            const aDifference = a.price - a.oldPrice;
            const bDifference = b.price - b.oldPrice;

            return bDifference - aDifference;
        });
    }

    return goodsData;
}

function sliders(contentSelector, nextSlideBtn, prevSlideBtn, data, type) {
    let endIndex = 4;
    let startIndex = 0;
    let editSlideIndex = 4;
    let sliderItems = [];

    if (data.length <= 4) {
        nextSlideBtn.remove();
        prevSlideBtn.remove();
    }

    showSlides(startIndex, endIndex);

    function showSlides(start, end) {
        if (end > data.length) {
            start = data.length - editSlideIndex;
            startIndex = data.length - editSlideIndex;

            end = data.length;
            endIndex = data.length;
        }

        if (start < 0) {
            start = 0;
            startIndex = 0;

            end = editSlideIndex;
            endIndex = editSlideIndex;
        }

        for (let i = start; i < end; i++) {
            if (type === 'main-sliders') {
                createSlideItem(data[i]);
            }

            if (type === 'buying-now') {
                createNowSlideItem(data[i]);
            }

            if (type === 'stock') {
                createStockSlideItem(data[i]);
            }
        }
    }

    displayNextSlideBtn.addEventListener('click', function () {
        deleteItems(sliderItems);
        plusSlide(editSlideIndex, editSlideIndex);
    });

    nextSlideBtn.addEventListener('click', function () {
        deleteItems(sliderItems);
        plusSlide(editSlideIndex, editSlideIndex);
    });

    displayPrevSlideBtn.addEventListener('click', function () {
        deleteItems(sliderItems);
        plusSlide(-editSlideIndex, -editSlideIndex);
    });

    prevSlideBtn.addEventListener('click', function () {
        deleteItems(sliderItems);
        plusSlide(-editSlideIndex, -editSlideIndex);
    });

    function deleteItems(items) {
        items.forEach(item => item.remove());
        sliderItems = [];
    }

    function plusSlide(a, b) {
        showSlides(startIndex += a, endIndex += b);
    }

    // stock slider
    function createStockSlideItem(item) {
        const sliderStockItem = document.createElement('div');
        sliderStockItem.classList.add('slider__item', 'slider-item');

        sliderStockItem.innerHTML = `
            <a class="stock__slider_header " href="#">${item.title}</a>

            ${!item.img
                ? '<p class="slider-item__photo not-available stock_description">Товара нет в наличии</p>'
                : `<img class="stock__slider_img stock_img" src="${item.img}" alt="stock_img">`}
            
            <p class="stock__slider_title ">${item.description}</p>

            <div class="stock__slider_timer">
                <div class="stock__slider_name">
                    <p>Срок действия:</p>
                </div>

                ${!item.time_action
                    ? '<span class="timer__counter-indefinitely">БЕССРОЧНО</span>'
                    : `<div class="slider-item__timer timer">
                            <div class="timer__counter">
                                <div class="timer__counter-body">
                                    <span>0</span><span>0</span>:
                                </div>
                                <div class="timer__counter-description">дней</div>
                            </div>

                            <div class="timer__counter">
                                <div class="timer__counter-body">
                                    <span>0</span><span>0</span>:
                                </div>
                                <div class="timer__counter-description">часов</div>
                            </div>

                            <div class="timer__counter">
                                <div class="timer__counter-body">
                                    <span>1</span><span>6</span>
                                </div>
                                <div class="timer__counter-description">минут</div>
                            </div>
                        </div>`}
            </div>

            <a class="stock__slider_link" href="#">Подробнее</a>
        `;

        contentSelector.append(sliderStockItem);
        sliderItems.push(sliderStockItem);
    }

    // buying now slider
    function createNowSlideItem(item) {
        const buyingItem = document.createElement('div');
        buyingItem.classList.add('goods__item');

        buyingItem.innerHTML = `
            <div class="goods_img">
            ${item.img ? `<img src= ${item.img} alt=${item.title}>` : `<a class="goods__link link goods__nothing">Нет в наличии</a>`}
            </div>
            <a class="goods__link link" href="${item.url}">${item.title}</a> 
        `;

        contentSelector.append(buyingItem);
        sliderItems.push(buyingItem);
    }

    // new, recommends, sale
    function createSlideItem(item) {
        const slide = document.createElement('div');
        slide.classList.add('slider__item', 'slider-item', 'novelty-item');

        slide.innerHTML = `
            ${!item.img
                ? '<p class="slider-item__photo not-available">Товара нет в наличии</p>'
                : `<img class="slider-item__photo " src="${item.img}" alt="Goods">`}
            <a class="slider-item__title" href="/pages/${item.url}">${item.description}</a>
            <div class="slider-item__price price">
                ${(!item.price && !item.oldPrice) || !item.img
                    ?'<p class="price__current stock_descriptions">Товара нет в наличии</p>'
                    : `Цена: <span class="price__current ">${item.price} ${item.currency}</span>
                    ${!item.oldPrice
                        ? ''
                        : `<span class="price__previous">${item.oldPrice} ${item.currency}</span>`}`
                }
                
            </div>

            <div class="slider-item__buttons" data-price='${item.price && item.img ? item.price : 'undefined'}' data-currency='${item.currency}'>
                <button style="${(!item.price && !item.oldPrice) || !item.img 
                    ? "border-bottom: none; background-color: gray"
                    : ""};">
                    <img src="./img/novelty/basket.svg" alt="Basket">
                    купить
                </button>
                <a href="#">Подробнее</a>
            </div>

            <img class="slider-item__label" src="./img/novelty/label.svg" alt="Icons">
        `;

        contentSelector.append(slide);
        sliderItems.push(slide);
    }
}

// BASKET
const basketGoodsAmount = document.querySelector('.basket-goods-amount');
const basketGoodsPrice = document.querySelector('.basket-goods-price');
const buyBtns = document.querySelectorAll('.slider-item__buttons');

refreshBasket(BASKET.elements, BASKET.price + CURRENCY);

buyBtns.forEach(btn => {
    let btnPrice = btn.getAttribute('data-price');
    let btnCurrency = btn.getAttribute('data-currency');

    if (btnPrice && btnPrice !== 'undefined') {
        if (btnCurrency === 'USD') {
            btnPrice = btnPrice * CURRENCY_EXCHANGE.USD;
        }

        if (btnCurrency === 'EUR') {
            btnPrice = btnPrice * CURRENCY_EXCHANGE.EUR;
        }

        if (btnCurrency === 'RUB') {
            btnPrice = btnPrice * CURRENCY_EXCHANGE.RUB;
        }

        btn.addEventListener('click', () => {
            BASKET.elements++;
            BASKET.price += +btnPrice;

            refreshBasket(BASKET.elements, BASKET.price.toFixed(2) + CURRENCY);
        });
    }
});

function refreshBasket(amount, price) {
    basketGoodsAmount.textContent = amount;
    basketGoodsPrice.textContent = price;
}